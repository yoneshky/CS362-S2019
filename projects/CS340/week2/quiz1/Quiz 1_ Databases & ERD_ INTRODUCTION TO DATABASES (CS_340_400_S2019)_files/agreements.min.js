!function(){var d={agrFetched:!1,agrArr:[],agrIndex:0,agrValid:!1,baseUrl:"https://s3.amazonaws.com/cdn.smarterservices.com/agreements",apiBase:"https://services.smarterservices.com/agreements/production/v1",env:"env_prod",setup:function(e){d.mode=e.mode,d.containerId=e.containerId,d.hideButton=e.hideButton,d.location=e.location,d.target=e.target,d.account=e.account,d.application=e.application,d.agreementId=e.agreement,d.single=!!e.agreement,d.hideTitle=!!e.hideTitle,d.includeStyles=!!e.includeStyles,d.agrFetched||(d.agrFetched=!0,d.fetch())},fetch:function(){var e=d.apiBase;e+="/applications/"+d.application,d.single?(e+="/agreements/"+d.agreementId,e+="/latest"):(e+="/targets/"+d.target,e+="/agreements/locations/"+d.location,e+="?accountId="+d.account);var o=new XMLHttpRequest;o.open("GET",e,!0),o.setRequestHeader("Content-type","application/json"),"env_prod"===d.env&&o.setRequestHeader("x-api-key","acaa36d8cce048558bd663f8b8469e2a"),o.responseType="json",d.agreementId?d.fetchAgreement(o):d.fetchPackage(o)},fetchAgreement:function(e){e.onload=function(){200!==e.status&&0!==e.status||!e.response?e.response.error&&u(e.response.error):("string"==typeof e.response?d.agreement=JSON.parse(e.response):d.agreement=e.response,o(),d.renderAgreement())},e.send()},renderAgreement:function(){var e=function(){var e=document.querySelector("#agr_wrap");document.body.className=document.body.className.replace("has-agr_popup",""),e&&e.remove(),"inline"===d.mode?d.renderInline(d.agreement):"popup"===d.mode&&d.renderPopup(d.agreement)};if(d.agreement){var o=document.querySelector("head");if("popup"===d.mode)if(document.querySelector("#agr_stylesheet"))e();else{var t=document.createElement("link");t.id="agr_stylesheet",t.rel="stylesheet",t.type="text/css",t.href=d.baseUrl+"/css/screen.css",t.media="all",t.onload=function(){e()},o.append(t)}else if(d.includeStyles){var n=document.createElement("link");n.id="agr_stylesheet-inline",n.rel="stylesheet",n.type="text/css",n.href=d.baseUrl+"/css/inline.css",n.media="all",n.onload=function(){e()},o.append(n)}else e()}},fetchPackage:function(e){e.onload=function(){200!==e.status&&0!==e.status||!e.response?e.response.error&&u(e.response.error):("string"==typeof e.response?d.agrArr=JSON.parse(e.response):d.agrArr=e.response,o(),0===d.agrArr.length?i():d.renderPackage())},e.send()},renderPackage:function(){var e=function(){var e=document.querySelector("#agr_wrap");document.body.className=document.body.className.replace("has-agr_popup",""),e&&e.remove(),0<d.agrArr.length&&("inline"===d.mode?d.renderInline():"popup"===d.mode&&d.renderPopup())};if(0<d.agrArr.length)if(document.querySelector("#agr_stylesheet"))e();else{var o=document.querySelector("head"),t=document.createElement("link");t.id="agr_stylesheet",t.rel="stylesheet",t.type="text/css",t.href=d.baseUrl+"/css/screen.css",t.media="all",t.onload=function(){e()},o.append(t)}else e()},renderInline:function(e){var o=document.querySelector("#"+d.containerId),t=d.createMarkup(e);o?document.querySelector("#agr_wrap")||o.append(t):console.warn("No element with the id “"+d.containerId+"” was found.")},renderPopup:function(e){document.body.className+=" has-agr_popup";var o=document.createElement("div");o.id="agr_wrap",o.className="agr_popup-wrap";var t=document.createElement("div");t.className="agr_popup";var n=null;d.single&&((n=document.createElement("button")).className="agr_popup__close",n.textContent="×",n.addEventListener("click",function(){var e=document.querySelector("#agr_wrap");document.body.className=document.body.className.replace("has-agr_popup",""),e&&e.remove(),d.agrFetched=!1}));var a=d.createMarkup(e);n&&t.append(n),t.append(a),o.append(t),document.querySelector("#agr_wrap")||document.body.append(o)},createMarkup:function(e){if(!e)e=d.agrArr[d.agrIndex];var o=null,i=null,t=null,n=null,a=null;if(e.prompt){if((o=d.single?document.createElement("div"):document.createElement("form")).className="agr_form",o.noValidate=!0,o.onsubmit=function(e){e.preventDefault(),d.submit()},"inline"===d.mode&&(o.id="agr_wrap"),(i=document.createElement("ul")).className="agr_fields",d.hideButton||d.single||((t=document.createElement("button")).setAttribute("type","submit"),t.className="agr_btn",t.textContent="Submit"),e.title&&!d.hideTitle&&((n=document.createElement("h1")).className="agr_title",n.textContent=e.title),e.content){(a=document.createElement("div")).className="agr_body";var p=e.content.replace(/(.+?)(\n|$)+/g,"<p>$1</p>");a.innerHTML=p}e.prompt.forEach(function(e){var o=document.createElement("li");if("explicit-consent"!==e.type){var t=document.createElement("label");t.setAttribute("for",e.sid),t.innerHTML=e.prompt}var n=null;if("checkbox"===e.type||"initials"===e.type||"input-box"===e.type?n=document.createElement("input"):"textarea"===e.type&&(n=document.createElement("textarea")).addEventListener("input",function(){n.style.height="",n.style.height=Math.min(n.scrollHeight+2)+"px"}),n&&(n.id=e.sid,n.name=e.sid,n.required=!0,n.value=""),"explicit-consent"===e.type){l(e,function(){n=d.createExplicitConsent(e)})}switch(e.type){case"checkbox":o.className+=" agr_cbox",n.type="checkbox",n.value=!0;break;case"initials":n.className=" agr_initials",n.type="text";break;case"input-box":n.type="text"}var a=setInterval(function(){n&&(clearInterval(a),"checkbox"===e.type?(o.append(n),o.append(t)):("explicit-consent"!==e.type&&o.append(t),o.append(n)),i.append(o))},100)}),n&&o.append(n),a&&o.append(a),i&&!d.single&&o.append(i),t&&o.append(t)}return o},createExplicitConsent:function(u){var s={channel:null,contactInfo:null,country:"US",promptId:u.sid},e=document.createElement("div");e.className="agr_explicit-consent";var o=document.createElement("form");o.id="agr_explicit-consent-"+u.sid;var t=document.createElement("span");t.className="agr_sub-heading",t.textContent=u.prompt,o.append(t);var c=document.createElement("ul");c.className="agr_fields",[{title:"SMS",id:u.sid+"-1",value:"sms",helper:"Enter your phone number"},{title:"Email",id:u.sid+"-2",value:"email",helper:"Enter your email address"},{title:"Phone Call",id:u.sid+"-3",value:"phone",helper:"Enter your phone number"}].forEach(function(e){var o=document.createElement("li");o.className="agr_radio";var t=document.createElement("input");t.id=e.id,t.name=u.sid+"-channel",t.type="radio",t.value=e.value,t.addEventListener("change",function(e){e.target.checked&&(s.channel=e.target.value);for(var o=document.querySelector("#agr_explicit-consent-"+u.sid).querySelectorAll('input[type="radio"]'),t=0;t<o.length;t++){var n=o[t].nextElementSibling.nextElementSibling,a=n.querySelector("input"),i=n.querySelector("select"),p=n.querySelector("button");o[t].checked?(a.disabled=!1,p.disabled=!1,i&&(i.disabled=!1)):a.disabled=!0}});var n=document.createElement("label");n.setAttribute("for",e.id),n.textContent=e.title;var a=document.createElement("div");a.className="agr_explicit-consent__form";var i=document.createElement("input");if(i.required=!0,i.disabled=!0,i.setAttribute("placeholder",e.helper),"Email"===e.title)i.type="email";else{i.type="tel";var p=document.createElement("label");p.className="agr_select";var l=document.createElement("select");l.innerHTML='<option value="US">USA</option><option value="CA">Canada</option><option value="GB">UK</option><option value="DZ">Algeria</option><option value="AD">Andorra</option><option value="AO">Angola</option><option value="AI">Anguilla</option><option value="AG">Antigua & Barbuda</option><option value="AR">Argentina</option><option value="AM">Armenia</option><option value="AW">Aruba</option><option value="AU">Australia</option><option value="AT">Austria</option><option value="AZ">Azerbaijan</option><option value="BS">Bahamas</option><option value="BH">Bahrain</option><option value="BD">Bangladesh</option><option value="BB">Barbados</option><option value="BY">Belarus</option><option value="BE">Belgium</option><option value="BZ">Belize</option><option value="BJ">Benin</option><option value="BM">Bermuda</option><option value="BT">Bhutan</option><option value="BO">Bolivia</option><option value="BA">Bosnia Herzegovina</option><option value="BW">Botswana</option><option value="BR">Brazil</option><option value="BN">Brunei</option><option value="BG">Bulgaria</option><option value="BF">Burkina Faso</option><option value="BI">Burundi</option><option value="KH">Cambodia</option><option value="CM">Cameroon</option><option value="CV">Cape Verde Islands</option><option value="KY">Cayman Islands</option><option value="CF">Central African Republic</option><option value="CL">Chile</option><option value="CN">China</option><option value="CO">Colombia</option><option value="KM">Comoros</option><option value="CG">Congo</option><option value="CK">Cook Islands</option><option value="CR">Costa Rica</option><option value="HR">Croatia</option><option value="CU">Cuba</option><option value="CY">Cyprus North</option><option value="CY">Cyprus South</option><option value="CZ">Czech Republic</option><option value="DK">Denmark</option><option value="DJ">Djibouti</option><option value="DM">Dominica</option><option value="DO">Dominican Republic</option><option value="EC">Ecuador</option><option value="EG">Egypt</option><option value="SV">El Salvador</option><option value="GQ">Equatorial Guinea</option><option value="ER">Eritrea</option><option value="EE">Estonia</option><option value="ET">Ethiopia</option><option value="FK">Falkland Islands</option><option value="FO">Faroe Islands</option><option value="FJ">Fiji</option><option value="FI">Finland</option><option value="FR">France</option><option value="GF">French Guiana</option><option value="PF">French Polynesia</option><option value="GA">Gabon</option><option value="GM">Gambia</option><option value="GE">Georgia</option><option value="DE">Germany</option><option value="GH">Ghana</option><option value="GI">Gibraltar</option><option value="GR">Greece</option><option value="GL">Greenland</option><option value="GD">Grenada</option><option value="GP">Guadeloupe</option><option value="GU">Guam</option><option value="GT">Guatemala</option><option value="GN">Guinea</option><option value="GW">Guinea - Bissau</option><option value="GY">Guyana</option><option value="HT">Haiti</option><option value="HN">Honduras</option><option value="HK">Hong Kong</option><option value="HU">Hungary</option><option value="IS">Iceland</option><option value="IN">India</option><option value="ID">Indonesia</option><option value="IR">Iran</option><option value="IQ">Iraq</option><option value="IE">Ireland</option><option value="IL">Israel</option><option value="IT">Italy</option><option value="JM">Jamaica</option><option value="JP">Japan</option><option value="JO">Jordan</option><option value="KZ">Kazakhstan</option><option value="KE">Kenya</option><option value="KI">Kiribati</option><option value="KP">Korea North</option><option value="KR">Korea South</option><option value="KW">Kuwait</option><option value="KG">Kyrgyzstan</option><option value="LA">Laos</option><option value="LV">Latvia</option><option value="LB">Lebanon</option><option value="LS">Lesotho</option><option value="LR">Liberia</option><option value="LY">Libya</option><option value="LI">Liechtenstein</option><option value="LT">Lithuania</option><option value="LU">Luxembourg</option><option value="MO">Macao</option><option value="MK">Macedonia</option><option value="MG">Madagascar</option><option value="MW">Malawi</option><option value="MY">Malaysia</option><option value="MV">Maldives</option><option value="ML">Mali</option><option value="MT">Malta</option><option value="MH">Marshall Islands</option><option value="MQ">Martinique</option><option value="MR">Mauritania</option><option value="YT">Mayotte</option><option value="MX">Mexico</option><option value="FM">Micronesia</option><option value="MD">Moldova</option><option value="MC">Monaco</option><option value="MN">Mongolia</option><option value="MS">Montserrat</option><option value="MA">Morocco</option><option value="MZ">Mozambique</option><option value="MN">Myanmar</option><option value="NA">Namibia</option><option value="NR">Nauru</option><option value="NP">Nepal</option><option value="NL">Netherlands</option><option value="NC">New Caledonia</option><option value="NZ">New Zealand</option><option value="NI">Nicaragua</option><option value="NE">Niger</option><option value="NG">Nigeria</option><option value="NU">Niue</option><option value="NF">Norfolk Islands</option><option value="NP">Northern Marianas</option><option value="NO">Norway</option><option value="OM">Oman</option><option value="PW">Palau</option><option value="PA">Panama</option><option value="PG">Papua New Guinea</option><option value="PY">Paraguay</option><option value="PE">Peru</option><option value="PH">Philippines</option><option value="PL">Poland</option><option value="PT">Portugal</option><option value="PR">Puerto Rico</option><option value="QA">Qatar</option><option value="RE">Reunion</option><option value="RO">Romania</option><option value="RU">Russia</option><option value="RW">Rwanda</option><option value="SM">San Marino</option><option value="ST">Sao Tome & Principe</option><option value="SA">Saudi Arabia</option><option value="SN">Senegal</option><option value="CS">Serbia</option><option value="SC">Seychelles</option><option value="SL">Sierra Leone</option><option value="SG">Singapore</option><option value="SK">Slovak Republic</option><option value="SI">Slovenia</option><option value="SB">Solomon Islands</option><option value="SO">Somalia</option><option value="ZA">South Africa</option><option value="ES">Spain</option><option value="LK">Sri Lanka</option><option value="SH">St. Helena</option><option value="KN">St. Kitts</option><option value="SC">St. Lucia</option><option value="SD">Sudan</option><option value="SR">Suriname</option><option value="SZ">Swaziland</option><option value="SE">Sweden</option><option value="CH">Switzerland</option><option value="SI">Syria</option><option value="TW">Taiwan</option><option value="TJ">Tajikstan</option><option value="TH">Thailand</option><option value="TG">Togo</option><option value="TO">Tonga</option><option value="TT">Trinidad & Tobago</option><option value="TN">Tunisia</option><option value="TR">Turkey</option><option value="TM">Turkmenistan</option><option value="TM">Turkmenistan</option><option value="TC">Turks & Caicos Islands</option><option value="TV">Tuvalu</option><option value="UG">Uganda</option><option value="UA">Ukraine</option><option value="AE">United Arab Emirates</option><option value="UY">Uruguay</option><option value="UZ">Uzbekistan</option><option value="VU">Vanuatu</option><option value="VA">Vatican City</option><option value="VE">Venezuela</option><option value="VN">Vietnam</option><option value="VG">Virgin Islands - British</option><option value="VI">Virgin Islands - US</option><option value="WF">Wallis & Futuna</option><option value="YE">Yemen</option><option value="YE">Yemen</option><option value="ZM">Zambia</option><option value="ZW">Zimbabwe</option>',p.append(l),l.addEventListener("change",function(e){s.country=e.target.value})}i.addEventListener("change",function(e){s.contactInfo=e.target.value});var r=document.createElement("button");r.className="agr_btn--outline",r.textContent="Send code",o.append(t),o.append(n),p&&a.append(p),a.append(i),a.append(r),o.append(a),c.append(o)}),o.append(c),e.append(o);var n=document.createElement("div");n.style.display="none";var a=document.createElement("label");a.setAttribute("for",u.sid),a.textContent="Please enter the code we sent you";var i=document.createElement("input");i.id=u.sid,i.name=u.sid,i.type="text",i.required=!0;var p=document.createElement("button");p.type="button",p.className="agr_btn--link",p.textContent="Didn’t get the code?",p.onclick=function(e){e.preventDefault(),o.style.display="block",n.style.display="none",l()},n.append(a),n.append(i),n.append(p),e.append(n),fields=Array.prototype.slice.call(c.querySelectorAll("input")),selects=Array.prototype.slice.call(c.querySelectorAll("select")),buttons=Array.prototype.slice.call(c.querySelectorAll("button")),fields=fields.concat(selects),fields=fields.concat(buttons);var l=function(){for(var e=0;e<fields.length;e++)fields[e].offsetParent&&(fields[e].disabled=!1)},r=function(){o.style.display="none",n.style.display="block"};return o.onsubmit=function(e){e.preventDefault();for(var o=0;o<fields.length;o++)fields[o].disabled=!0;d.submitExplicitConsent(s,r,fields)},e},submitExplicitConsent:function(e,o,t){var n={type:e.channel,promptId:e.promptId},a=function(e){alert("Please enter a valid phone number.");for(var o=0;o<e.length;o++)e[o].offsetParent&&(e[o].disabled=!1)};if("email"===e.channel)n.email=e.contactInfo;else{var i=window.libphonenumber.parse(e.contactInfo,e.country);if(!i.phone)return void a(t);var p=i.phone;if(p=window.libphonenumber.format(p,e.country,"E.164"),n.phoneNumber=p,!window.libphonenumber.isValidNumber(p))return void a(t)}var l=new XMLHttpRequest,r=d.apiBase;r+="/applications/"+d.application,r+="/target/"+d.target,r+="/send-consent",l.open("POST",r,!0),l.setRequestHeader("Content-type","application/json"),l.responseType="json",l.onload=function(){200!==l.status&&0!==l.status||!l.response?l.response.error&&u(l.response.error):o&&o()},l.send(JSON.stringify(n))},submit:function(){var e=d.agrArr[d.agrIndex],o=new XMLHttpRequest,t=d.apiBase;t+="/applications/"+d.application,t+="/targets/"+d.target,t+="/agreements/"+d.agrArr[0].agreementSid,t+="/versions/"+d.agrArr[0].sid,t+="/sign",o.open("POST",t,!0),o.setRequestHeader("Content-type","application/json"),o.responseType="json",o.onload=function(){200!==o.status&&0!==o.status||!o.response?o.response.error&&u(o.response.error):(d.agrArr.shift(),d.renderPackage(),0===d.agrArr.length&&i())};var n=[],a=[];if(e.prompt.forEach(function(e){var o=document.querySelector("#"+e.sid);if(o&&o.setCustomValidity(""),!o||o&&!o.checkValidity())o&&(o.setCustomValidity("This field is required."),o.className.indexOf("error")<0&&(o.className+=" error"),n.push(o));else{var t={key:e.sid,value:o.value};a.push(t)}}),!(0<n.length)){e={accountId:d.account,consentProvided:a,ipAddress:"127.0.0.1"};o.send(JSON.stringify(e))}}},l=function(e,o){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://s3.amazonaws.com/cdn.smarterservices.com/smarterid/static/js/libphonenumber-js.min.js",t.onload=function(){o(e)},document.body.appendChild(t)},u=function(e){alert(e)},o=function(){var e=document.createEvent("Event");e.initEvent("agreementsFetched",!0,!0),document.dispatchEvent(e)},i=function(){var e=document.createEvent("Event");e.initEvent("agreementsComplete",!0,!0),document.dispatchEvent(e)};window.Agreements=d}(),[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach(function(e){e.hasOwnProperty("append")||Object.defineProperty(e,"append",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=Array.prototype.slice.call(arguments),t=document.createDocumentFragment();e.forEach(function(e){var o=e instanceof Node;t.appendChild(o?e:document.createTextNode(String(e)))}),this.appendChild(t)}})}),[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){null!==this.parentNode&&this.parentNode.removeChild(this)}})});